<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>On assumptions of SDT models</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-0a61af393cc41664e89a7addda21b354.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<meta name="quarto:status" content="draft">


<meta name="citation_title" content="On assumptions of SDT models">
<meta name="citation_author" content="Vencislav Popov">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Random Orderings and Stochastic Theories of Responses (1960);,citation_abstract=In interpreting human behavior there is a need to substitute “stochastic consistency of choices” for “absolute consistency of choices”. The latter is usually assumed in economic theory, but is not well supported by experience. It is, in fact, not assumed in empirical econometrics and psychology.;,citation_author=H. D. Block;,citation_editor=Jacob Marschak;,citation_publication_date=1974;,citation_cover_date=1974;,citation_year=1974;,citation_doi=10.1007/978-94-010-9276-0_8;,citation_isbn=978-94-010-9276-0;,citation_language=en-US;,citation_inbook_title=Economic Information, Decision, and Prediction: Selected Essays: Volume I Part I Economics of Decision;">
<meta name="citation_reference" content="citation_title=Signal detection theory and generalized linear models;,citation_author=Lawrence T DeCarlo;,citation_publication_date=1998-06;,citation_cover_date=1998-06;,citation_year=1998;,citation_issue=2;,citation_doi=10.1037/1082-989X.3.2.186;,citation_issn=1939-1463, 1082-989X;,citation_volume=3;,citation_language=en-US;,citation_journal_title=Psychological Methods;">
<meta name="citation_reference" content="citation_title=Binary ROCs in perception and recognition memory are curved;,citation_abstract=In recognition memory, a classic finding is that receiver operating characteristics (ROCs) are curvilinear. This has been taken to support the fundamental assumptions of signal detection theory (SDT) over discrete-state models such as the double high-threshold model (2HTM), which predicts linear ROCs. Recently, however, Bröder and Schütz (2009) challenged this argument by noting that most of the data on which support for SDT is based have involved confidence ratings. The authors argued that certain types of rating scale usage may result in curved ROCs even if the generating process is thresholded in nature. From this point of view, only ROCs constructed via experimental bias manipulations are useful for discriminating between the models. Bröder and Schütz conducted a meta-analysis and new experiments that compared SDT and the 2HTM using binary (yes–no) ROCs and found that many of these functions were linear, supporting 2HTM over SDT. We examine all the data reported by Bröder and Schütz, noting important limitations in their methodology, analyses, and conclusions. We report a new meta-analysis and 2 new experiments to examine the issue more closely while avoiding the limitations of Bröder and Schütz’s study. These new data indicate that binary ROCs are curved in recognition, consistent with previous findings in perception and reasoning. Our results support classic arguments in favor of SDT and indicate that curvature in ratings ROCs is not task specific. We recommend the ratings procedure and suggest that analyses based on threshold models be treated with caution. (PsycInfo Database Record (c) 2025 APA, all rights reserved);,citation_author=Chad Dube;,citation_author=Caren M. Rotello;,citation_publication_date=2012;,citation_cover_date=2012;,citation_year=2012;,citation_issue=1;,citation_doi=10.1037/a0024957;,citation_issn=1939-1285;,citation_volume=38;,citation_journal_title=Journal of Experimental Psychology: Learning, Memory, and Cognition;,citation_publisher=American Psychological Association;">
<meta name="citation_reference" content="citation_title=Signal Detection Theory and ROC-analysis;,citation_author=James P. Egan;,citation_publication_date=1975;,citation_cover_date=1975;,citation_year=1975;,citation_isbn=978-0-12-232850-3;,citation_language=en-US;">
<meta name="citation_reference" content="citation_title=A representation theorem for finite random scale systems;,citation_abstract=This paper investigates necessary and sufficient conditions on choice probabilities Pa,B (of picking an element a in an offered set B), for the existence of random variables Ua, satisfying the equation Pa,B = PUa = max Ub  b $\in$ B for all nonempty finite subsets B in a fixed set A, and all a $\in$ B. A complete solution to this representation problem is obtained in the case where A is finite. The proof of the representation theorem provides an algorithm to construct the random variables Ua, up to some uniqueness properties. Investigation of these uniqueness properties show that an important part of the ordinal structure of the underlying random variables can be recovered.;,citation_author=J. C. Falmagne;,citation_publication_date=1978-08;,citation_cover_date=1978-08;,citation_year=1978;,citation_issue=1;,citation_doi=10.1016/0022-2496(78)90048-2;,citation_issn=0022-2496;,citation_volume=18;,citation_language=en-US;,citation_journal_title=Journal of Mathematical Psychology;,citation_publisher=Elsevier BV;">
<meta name="citation_reference" content="citation_title=The Generalized Area Theorem in Signal Detection Theory;,citation_abstract=In the context of standard signal detection theory, the data from the infinite sequence of forced-choice tasks that involve a single realization of a signal and k independent realizations of a noise source, k = 1, 2, … , are shown to be sufficient to reconstruct the receiver operating characteristic (ROC) for the corresponding yes-no detection task. This follows from a novel interpretation of forced-choice probabilities as the moments of a random variable whose distribution function determines the yes-no ROC; the first moment is just the area subtended by the ROC. We further develop the standard theory of the forced-choice paradigm, and obtain conditions allowing that theory to be verified in empirical data.;,citation_author=Geoffrey Iverson;,citation_author=Donald Bamber;,citation_publication_date=1997;,citation_cover_date=1997;,citation_year=1997;,citation_inbook_title=Choice, Decision, and Measurement;">
<meta name="citation_reference" content="citation_title=On the measurement of criterion noise in signal detection theory: The case of recognition memory.;,citation_abstract=Traditional approaches within the framework of signal detection theory (SDT; Green &amp;amp;amp;amp; Swets, 1966), especially in the field of recognition memory, assume that the positioning of response criteria is not a noisy process. Recent work (Benjamin, Diaz, &amp;amp; Wee, 2009; Mueller &amp;amp; Weidemann, 2008) has challenged this assumption, arguing not only for the existence of criterion noise but also for its large magnitude and substantive contribution to individuals’ performance. A review of these recent approaches for the measurement of criterion noise in SDT identifies several shortcomings and confoundings. A reanalysis of Benjamin et al.’s (2009) data sets as well as the results from a new experimental method indicate that the different forms of criterion noise proposed in the recognition memory literature are of very low magnitudes, and they do not provide a significant improvement over the account already given by traditional SDT without criterion noise. (PsycINFO Database Record (c) 2016 APA, all rights reserved);,citation_author=David Kellen;,citation_author=Karl Christoph Klauer;,citation_author=Henrik Singmann;,citation_publication_date=2012-07;,citation_cover_date=2012-07;,citation_year=2012;,citation_issue=3;,citation_doi=10.1037/a0027727;,citation_issn=1939-1471;,citation_volume=119;,citation_language=en-US;,citation_journal_title=Psychological Review;,citation_publisher=American Psychological Association;">
<meta name="citation_reference" content="citation_title=Signal detection and threshold modeling of confidence-rating ROCs: A critical test with minimal assumptions.;,citation_abstract=An ongoing discussion in the recognition-memory literature concerns the question of whether recognition judgments reflect a direct mapping of graded memory representations (a notion that is instantiated by signal detection theory) or whether they are mediated by a discrete-state representation with the possibility of complete information loss (a notion that is instantiated by threshold models). These 2 accounts are usually evaluated by comparing their (penalized) fits to receiver operating characteristic data, a procedure that is predicated on substantial auxiliary assumptions, which if violated can invalidate results. We show that the 2 accounts can be compared on the basis of critical tests that invoke only minimal assumptions. Using previously published receiver operating characteristic data, we show that confidence-rating judgments are consistent with a discrete-state account. (PsycINFO Database Record (c) 2016 APA, all rights reserved);,citation_author=David Kellen;,citation_author=Karl Christoph Klauer;,citation_publication_date=2015-07;,citation_cover_date=2015-07;,citation_year=2015;,citation_issue=3;,citation_doi=10.1037/a0039251;,citation_issn=1939-1471;,citation_volume=122;,citation_language=en-US;,citation_journal_title=Psychological Review;,citation_publisher=American Psychological Association;">
<meta name="citation_reference" content="citation_title=Testing the foundations of signal detection theory in recognition memory.;,citation_abstract=Signal detection theory (SDT) plays a central role in the characterization of human judgments in a wide range of domains, most prominently in recognition memory. But despite its success, many of its fundamental properties are often misunderstood, especially when it comes to its testability. The present work examines five main properties that are characteristic of existing SDT models of recognition memory: (a) random-scale representation, (b) latent-variable independence, (c) likelihood-ratio monotonicity, (d) ROC function asymmetry, and (e) nonthreshold representation. In each case, we establish testable consequences and test them against data collected in the appropriately designed recognition-memory experiment. We also discuss the connection between yes–no, forced-choice, and ranking judgments. This connection introduces additional behavioral constraints and yields an alternative method of reconstructing yes–no ROC functions. Overall, the reported results provide a strong empirical foundation for SDT modeling in recognition memory. (PsycInfo Database Record (c) 2025 APA, all rights reserved);,citation_author=David Kellen;,citation_author=Samuel Winiger;,citation_author=John C. Dunn;,citation_author=Henrik Singmann;,citation_publication_date=2021-11;,citation_cover_date=2021-11;,citation_year=2021;,citation_issue=6;,citation_doi=10.1037/rev0000288;,citation_issn=1939-1471;,citation_volume=128;,citation_language=en-US;,citation_journal_title=Psychological Review;,citation_publisher=American Psychological Association;">
<meta name="citation_reference" content="citation_title=Choice, preference, and utility: Probabilistic and deterministic representations;,citation_abstract=There is a huge theoretical literature on preference and choice, with a corresponding large literature on testing theories. In this chapter we focus almost entirely on theoretical work. In this section we review some empirical applications that motivate some of our theoretical primitives, such as the &amp;amp;amp;quot;sample spaces&amp;quot; for which probabilistic models are designed. In later sections, we provide references to relevant empirical work. (PsycInfo Database Record (c) 2025 APA, all rights reserved);,citation_author=A. A. J. Marley;,citation_author=Michel Regenwetter;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;,citation_doi=10.1017/9781139245913.008;,citation_isbn=978-1-107-02908-8 978-1-316-58698-3;,citation_inbook_title=New handbook of mathematical psychology: Foundations and methodology, Vol. 1;,citation_series_title=Cambridge handbooks in psychology;">
<meta name="citation_reference" content="citation_title=Testing the Random Utility Hypothesis Directly;,citation_abstract=Abstract We test a set of inequalities in choice probabilities, shown to be necessary and sufficient for random utility by Falmagne (1978). We run an experiment in which each of 141 participants chooses six times from each doubleton or larger subset of a universe of five lotteries. We compute Bayes factors in favour of random utility, versus an alternative with unrestricted choice probabilities. There is strong evidence that a large majority of participants satisfy random utility; however, there is strong evidence against random utility for four participants. Results are fairly robust to the choice of prior.;,citation_author=William J McCausland;,citation_author=Clintin Davis-Stober;,citation_author=Aaj Marley;,citation_author=Sanghyuk Park;,citation_author=Nicholas Brown;,citation_publication_date=2020-01;,citation_cover_date=2020-01;,citation_year=2020;,citation_issue=625;,citation_doi=10.1093/ej/uez039;,citation_issn=0013-0133, 1468-0297;,citation_volume=130;,citation_language=en-US;,citation_journal_title=The Economic Journal;">
<meta name="citation_reference" content="citation_title=Extreme-Value Signal Detection Theory for RecognitionMemory: The Parametric Road Not Taken;,citation_abstract=Signal Detection Theory has long served as a cornerstone of psychological research, particularly in recognition memory. Yet its conventional application hinges almost exclusively on the Gaussian assumption—an adherence rooted more in historical convenience than theoretical necessity that comes with a number of well-documented drawbacks. In this work, we critically examine these limitations and introduce a principled parametric alternative: the Gumbel_min model, based on extreme-value distributions of event minima. A key feature of this model is its grounding in a behavioral principle of invariance under uniform choice-set expansions—a prediction we empirically validate in a novel recognition-memory experiment. We further benchmark the Gumbel_min model against its Gaussian counterpart across multiple recognition-memory tasks, including confidence-rating, ranking, forced-choice, and detection-plus-identification paradigms. Our findings highlight the model’s parsimonious yet successful characterization of recognition-memory judgments, as well as the utility of its associated discriminability index, g’, which can be directly computed from a single pair of hit and false-alarm rates.;,citation_author=Constantin G. Meyer-Grant;,citation_author=David Kellen;,citation_author=Samuel M. Harding;,citation_author=Henrik Singmann;,citation_publication_date=2025-04;,citation_cover_date=2025-04;,citation_year=2025;,citation_doi=10.31234/osf.io/qhrfj_v1;,citation_language=en-US;,citation_publisher=OSF;">
<meta name="citation_reference" content="citation_title=Latent mnemonic strengths are latent: A comment on Mickes, Wixted, and Wais (2007);,citation_abstract=Mickes, Wixted, and Wais (2007) proposed a simple test of latent strength variability in recognition memory. They asked participants to rate their confidence using either a 20-point or a 99-point strength scale and plotted distributions of the resulting ratings. They found 25% more variability in ratings for studied than for new items, which they interpreted as providing evidence that latent mnemonic strength distributions are 25% more variable for studied than for new items. We show here that this conclusion is critically dependent on assumptions—so much so that these assumptions determine the conclusions. In fact, opposite conclusions, such that study does not affect the variability of latent strength, may be reached by making different but equally plausible assumptions. Because all measurements of mnemonic strength variability are critically dependent on untestable assumptions, all are arbitrary. Hence, there is no principled method for assessing the relative variability of latent mnemonic strength distributions.;,citation_author=Jeffrey N. Rouder;,citation_author=Michael S. Pratte;,citation_author=Richard D. Morey;,citation_publication_date=2010-06;,citation_cover_date=2010-06;,citation_year=2010;,citation_issue=3;,citation_doi=10.3758/PBR.17.3.427;,citation_issn=1531-5320;,citation_volume=17;,citation_language=en-US;,citation_journal_title=Psychonomic Bulletin &amp;amp;amp; Review;">
<meta name="citation_reference" content="citation_title=From ROC Curves to Psychological Theory;,citation_author=Jeffrey Rouder;,citation_author=Jordan Province;,citation_author=April Swagman;,citation_author=Jonathan Thiele;,citation_publication_date=2015;,citation_cover_date=2015;,citation_year=2015;,citation_doi=10.13140/RG.2.1.2372.2326;,citation_language=en-US;">
<meta name="citation_reference" content="citation_title=Unite and Conquer: A Multiplicative Inequality for Choice Probabilities;,citation_abstract=Two probabilistic theories of choice behavior (the model of independent random utility and the model of elimination by aspects) imply a testable property, the multiplicative inequality, according to which the probability of selecting an alternative x from an offered set A ◡ B is at least as large as the product of the probabilities of selecting x from A and from B.;,citation_author=Shmuel Sattath;,citation_author=Amos Tversky;,citation_publication_date=1976;,citation_cover_date=1976;,citation_year=1976;,citation_fulltext_html_url=https://www.jstor.org/stable/1911382;,citation_issue=1;,citation_doi=10.2307/1911382;,citation_issn=0012-9682;,citation_volume=44;,citation_journal_title=Econometrica;,citation_publisher=[Wiley, Econometric Society];">
<meta name="citation_reference" content="citation_title=A shift representable signal detection model of recognition memory.;,citation_abstract=A major theoretical question in psychology is how recognition memory can be understood in terms of latent variables reflecting underlying familiarity and response criteria. To address this, we investigate the viability of a shift representable signal detection model in which the shape of the familiarity distribution is the same for all old and new items. We present a new technique for fitting such models to recognition memory data using only ordinal properties of these data based on the monotonic linear regression algorithm described by Dunn and Anderson (Psychological Methods, 2024). We apply this methodology to analyse the results of three recognition memory experiments that vary the number of study presentations, studytest modality, focused vs. divided attention, and instructions to read study items or to generate them from cues. In each case, the data are well-described by a shift representable model with a recovered distributional form that has a negative skew that approximates the minimum extreme value, or Gumbel, distribution. We propose that if these results can be generalised across different experiments, it becomes possible to define a standard unit of measurement of familiarity that will enable direct comparisons to be made across different experiments and conditions. We discuss the implications of these results for current models of memory and for future application of our approach to other domains.;,citation_author=John Dunn;,citation_author=Laura Anderson;,citation_author=Rachel Stephens;,citation_publication_date=2026;,citation_cover_date=2026;,citation_year=2026;,citation_language=en-US;">
<meta name="citation_reference" content="citation_title=The forgotten history of signal detection theory;,citation_abstract=Signal detection theory is one of psychology’s most well-known and influential theoretical frameworks. However, the conceptual hurdles that had to be overcome before the theory could finally emerge in its modern form in the early 1950s seem to have been largely forgotten. Here, I trace the origins of signal detection theory, beginning with Fechner’s (1860/1966) Elements of Psychophysics. Over and above the Gaussian-based mathematical framework conceived by Fechner in 1860, nearly a century would pass before psychophysicists finally realized in 1953 that the distribution of sensations generated by neural noise falls above, not below, the threshold of conscious awareness. An extensive body of single-unit recording and neuroimaging research conducted since then supports the idea that sensory noise yields genuinely felt conscious sensations even in the complete absence of stimulation. That hard-to-come-by insight in 1953 led immediately to the notion of a movable decision criterion and to the methodology of receiver operating characteristic (ROC) analysis. Over the ensuing years, signal detection theory and ROC analysis have had an enormous impact on basic and applied science alike. Yet, in some quarters of our field, that fact appears to be virtually unknown. By tracing both its fascinating origins and its phenomenal impact, I hope to illustrate why no area of experimental psychology should ever be oblivious to signal detection theory. (PsycInfo Database Record (c) 2025 APA, all rights reserved);,citation_author=John T. Wixted;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_issue=2;,citation_doi=10.1037/xlm0000732;,citation_issn=1939-1285;,citation_volume=46;,citation_journal_title=Journal of Experimental Psychology: Learning, Memory, and Cognition;,citation_publisher=American Psychological Association;">
</head>

<body class="quarto-light"><div id="quarto-draft-alert" class="alert alert-warning"><i class="bi bi-pencil-square"></i>Draft</div>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">On assumptions of SDT models</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
            <div class="quarto-title-meta-author">
          <div class="quarto-title-meta-heading">Author</div>
          <div class="quarto-title-meta-heading">Affiliation</div>
          
                <div class="quarto-title-meta-contents">
            <p class="author">Vencislav Popov </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Department of Psychology, University of Zurich
                      </p>
                  </div>
                    </div>
        
        <div class="quarto-title-meta">

                      
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      </div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#section" id="toc-section" class="nav-link active" data-scroll-target="#section">Section</a></li>
  </ul>
<div class="quarto-alternate-notebooks"><h2>Notebooks</h2><ul><li><a href="notes/definitions-preview.html"><i class="bi bi-journal-code"></i>Background and Definitions</a></li></ul></div></nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">



  


<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section">Section</h2>
<p>This is a simple placeholder for the manuscript’s main document <span class="citation" data-cites="knuth84">(<a href="#ref-knuth84" role="doc-biblioref"><strong>knuth84?</strong></a>)</span>.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>